\section{Fakes}

\subsection{Hvad er Fakes?}
En Fake er en falsk version af en klasses dependancy.

\subsection{Hvorfor bruge Fakes?}
Når vi ønsker at isolere vore UUT fra det system det normalt fungerer i, for at teste det i isolation.

\subsection{Hvordan bruges Fakes?}

\begin{itemize}
	\item Identificer dependencies.
	\item Insert interfaces for dem
	\item Inject dependencies ind i UUT. \todo{eksempel}
\end{itemize}

\subsection{Statebaserede tests og Interactionbaserede tests}
Der findes to typer af Unit tests:

\begin{itemize}
	\item State-Based - Hvor vi tester om UUT er i det forventede state efter behandling. Fakes til denne type af test er en \textbf{STUB}.
	\item Interaction-Based - Hvor vi tester om UUT har den ønskede adfærd efter behandling. Her kigges der på UUT's adfærd med dens dependencies. Fakes til denne type af test er en \textbf{MOCK}.
\end{itemize}

\subsubsection{Stubs}
Stubbe eksisterer kun for at give UUT de dependancies den behøver for at fungere.

Procedure for stubbe:
\begin{itemize}
	\item Arrange - Opsætning af UUT og dens dependancies.
	\item Act - Stimuler UUT'en. Få den til at gøre det vi ønsker.
	\item Assert - Assert på om vi får det ønskede resultat, altså om UUT's state er den ønskede.
\end{itemize}

Bemærk at Assert sker på UUT og \textit{ikke} på selve stubben. En stub kan derfor ikke forårsage en fejlet test.

\begin{figure}
\centering
\includegraphics[width=0.7\linewidth]{figs/stubTest.PNG}
\caption{Unit testing med stubbe.}
\label{fig:stubTest}
\end{figure}

Vi ønsker at lave en state baseret test på klassen A. Klassen A har en afhængighed Class B.

\begin{figure}
\centering
\includegraphics[width=0.7\linewidth]{figs/stubNoInterface.PNG}
\caption{Afhængighed - DIP ikke opfyldt.}
\label{fig:stubNoInterface}
\end{figure}

Brugen af en interface vil her give mening. Vi påfører DIP of får da:

\begin{figure}
\centering
\includegraphics[width=0.7\linewidth]{figs/stubInterface.PNG}
\caption{}
\label{fig:stubInterface}
\end{figure}

Her laves en en stub af interfacet B, hvorefter man kan bruge stubben til at teste UUT i et kontrolleret miljø.
\textsl{}